{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Code Editor</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #e0f7fa, #e3f2fd);
      padding-bottom: 40px;
    }
    .editor-container {
      margin-top: 30px;
      background: white;
      padding: 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.12);
    }
    .editor-header {
      background: linear-gradient(90deg, #3f51b5, #2196f3);
      color: white;
      padding: 15px 20px;
      font-size: 1.4rem;
      font-weight: bold;
    }
    #code {
      width: 100%;
      height: 400px;
      font-family: monospace;
      font-size: 14px;
      border-radius: 8px;
      padding: 12px;
      resize: vertical;
      background: #fefefe;
      border: 1px solid #ddd;
    }
    #input_data {
      width: 100%;
      height: 150px;
      font-family: monospace;
      font-size: 14px;
      border-radius: 8px;
      padding: 12px;
      resize: vertical;
      background: #fdfdfd;
      border: 1px solid #ddd;
    }
    .btn-run {
      background: linear-gradient(135deg, #43cea2, #185a9d);
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: bold;
      transition: transform 0.2s ease, opacity 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    .btn-run:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    pre {
      background-color: #212121;
      color: #00ff9d;
      padding: 12px;
      border-radius: 8px;
      white-space: pre-wrap;
    }
    .card-success {
      border-left: 6px solid #00c853;
    }
    .card-error {
      border-left: 6px solid #d32f2f;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="editor-container">
    <div class="editor-header">
      üíª Online Code Editor
    </div>
    <div class="p-4">
      <form method="post">
        {% csrf_token %}

        <!-- Language Selector -->
        <div class="mb-3">
          <label for="language" class="form-label fw-bold">Language:</label>
          <select name="language" id="language" class="form-select">
            <option value="py" {% if language == "py" %}selected{% endif %}>üêç Python</option>
            <option value="cpp" {% if language == "cpp" %}selected{% endif %}>‚ö° C++</option>
            <option value="c" {% if language == "c" %}selected{% endif %}>üîµ C</option>
            <option value="java" {% if language == "java" %}selected{% endif %}>‚òï Java</option>
          </select>
          <p class="text-muted fst-italic mt-2">
        <strong>Note for Java users:</strong> Please write your code inside the <code>main</code> function, and the class name should be <code>Main</code>. The Java program execution starts from the <code>main</code> method.
        </p>
        </div>

        <!-- Code Area -->
        <div class="mb-3">
          <label for="code" class="form-label fw-bold">Your Code:</label>
          <textarea name="code" id="code">{{ code|default_if_none:"" }}</textarea>
        </div>

        <!-- Custom Input -->
        <div class="mb-3">
          <label for="input_data" class="form-label fw-bold">Custom Input:</label>
          <textarea name="input_data" id="input_data">{{ input_data|default_if_none:"" }}</textarea>
        </div>

        <!-- Run Button -->
        <button type="submit" class="btn-run">‚ñ∂ Run Code</button>
      </form>
    </div>
  </div>

  <!-- Output Section -->
  {% if output %}
    <div class="card card-success mt-4">
      <div class="card-header bg-success text-white fw-bold">‚úÖ Output</div>
      <div class="card-body">
        <pre>{{ output }}</pre>
      </div>
    </div>
  {% endif %}

  {% if error %}
    <div class="card card-error mt-4">
      <div class="card-header bg-danger text-white fw-bold">‚ùå Error</div>
      <div class="card-body">
        <pre>{{ error }}</pre>
      </div>
    </div>
  {% endif %}
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
